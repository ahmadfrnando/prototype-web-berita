<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Berita - Portal Berita lapas</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        #sidebarOverlay {
            transition: opacity 0.3s ease;
        }
        #sidebar {
            transition: transform 0.3s ease;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="flex h-screen overflow-hidden">
        <!-- Overlay -->
        <div id="sidebarOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden lg:hidden"></div>

        <!-- Sidebar -->
        <aside id="sidebar" class="fixed lg:static w-64 bg-[#1e3a8a] text-white flex-shrink-0 h-full z-40 transform -translate-x-full lg:translate-x-0">
            <div class="p-6 border-b border-blue-700">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <div class="w-12 h-12 bg-white rounded flex items-center justify-center">
                            <span class="text-[#1e3a8a] font-bold text-xl">LP</span>
                        </div>
                        <div>
                            <h2 class="font-bold">Admin Panel</h2>
                            <p class="text-xs text-blue-200">lapas Medan</p>
                        </div>
                    </div>
                    <button id="closeSidebar" class="lg:hidden text-white">
                        <i class="fa-solid fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            <nav class="p-4">
                <ul class="space-y-2">
                    <li>
                        <a href="index.html" class="flex items-center space-x-3 px-4 py-3 hover:bg-blue-700 rounded-lg transition">
                            <span><i class="fa-solid fa-gauge-high"></i></span>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="news.html" class="flex items-center space-x-3 px-4 py-3 bg-blue-700 rounded-lg font-medium">
                            <span><i class="fa-solid fa-newspaper"></i></span>
                            <span>Kelola Berita</span>
                        </a>
                    </li>
                    <li>
                        <a href="approval.html" class="flex items-center space-x-3 px-4 py-3 hover:bg-blue-700 rounded-lg transition">
                            <span><i class="fa-solid fa-circle-check"></i></span>
                            <span>Approval Berita</span>
                        </a>
                    </li>
                    <li>
                        <a href="users.html" class="flex items-center space-x-3 px-4 py-3 hover:bg-blue-700 rounded-lg transition">
                            <span><i class="fa-solid fa-users"></i></span>
                            <span>Pengguna</span>
                        </a>
                    </li>
                    <li class="pt-4 mt-4 border-t border-blue-700">
                        <a href="../login.html" class="flex items-center space-x-3 px-4 py-3 hover:bg-red-600 rounded-lg transition">
                            <span><i class="fa-solid fa-right-from-bracket"></i></span>
                            <span>Logout</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <div class="flex-1 overflow-y-auto">
            <!-- Top Bar -->
            <header class="bg-white shadow-sm sticky top-0 z-20">
                <div class="flex items-center justify-between px-4 lg:px-8 py-4">
                    <div class="flex items-center space-x-4">
                        <button id="hamburger" class="lg:hidden text-gray-700">
                            <i class="fa-solid fa-bars text-xl"></i>
                        </button>
                        <div>
                            <a href="news.html" class="text-blue-600 hover:text-blue-800 text-sm">← Kembali</a>
                            <h1 class="text-xl lg:text-2xl font-bold text-gray-800 mt-1">Edit Berita</h1>
                        </div>
                    </div>
                    <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold">
                        A
                    </div>
                </div>
            </header>

            <!-- Form Content -->
            <main class="p-4 lg:p-8">
                <form onsubmit="handleUpdate(event)" class="max-w-4xl mx-auto">
                    <div class="bg-white rounded-lg shadow p-4 lg:p-8 space-y-6">
                        <!-- Status Badge -->
                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between pb-4 border-b space-y-3 sm:space-y-0">
                            <div>
                                <span class="inline-flex px-3 py-1 text-sm font-medium rounded-full bg-green-100 text-green-800">
                                    Published
                                </span>
                            </div>
                            <div class="text-xs sm:text-sm text-gray-600">
                                <p>Dibuat: 15 Des 2025 oleh Admin</p>
                                <p>Terakhir diubah: 15 Des 2025, 10:30 WIB</p>
                            </div>
                        </div>

                        <!-- Judul Berita -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Judul Berita <span class="text-red-500">*</span></label>
                            <input 
                                type="text" 
                                id="judulBerita"
                                value="Peluncuran Aplikasi Layanan Publik Terintegrasi Kota Medan"
                                required
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            >
                        </div>

                        <!-- Slug -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Slug (URL) <span class="text-red-500">*</span></label>
                            <input 
                                type="text" 
                                id="slug"
                                value="peluncuran-aplikasi-layanan-publik-terintegrasi"
                                required
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50"
                            >
                        </div>

                        <!-- Kategori & Tag -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Kategori <span class="text-red-500">*</span></label>
                                <select required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Pilih Kategori</option>
                                    <option selected>Pemerintahan</option>
                                    <option>Kegiatan</option>
                                    <option>Pengumuman</option>
                                    <option>Layanan</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tag</label>
                                <input 
                                    type="text" 
                                    value="smart city, layanan publik, digital, aplikasi"
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                                <p class="text-xs text-gray-500 mt-1">Pisahkan tag dengan koma</p>
                            </div>
                        </div>

                        <!-- Current Image & Upload -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Gambar Cover Saat Ini</label>
                            <div class="mb-4">
                                <img src="https://images.unsplash.com/photo-1557804506-669a67965ba0?w=800&q=80" alt="Current Cover" class="w-full max-h-48 lg:max-h-60 object-cover rounded-lg">
                            </div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Upload Gambar Baru (Opsional)</label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 lg:p-8 text-center hover:border-blue-500 transition cursor-pointer">
                                <input type="file" id="imageUpload" accept="image/*" class="hidden" onchange="previewImage(event)">
                                <label for="imageUpload" class="cursor-pointer">
                                    <div id="uploadPlaceholder">
                                        <div class="text-4xl lg:text-6xl mb-3"><i class="fa-solid fa-camera"></i></div>
                                        <p class="text-gray-600 font-medium mb-1">Klik untuk upload gambar baru</p>
                                        <p class="text-sm text-gray-500">PNG, JPG, JPEG (max 2MB)</p>
                                    </div>
                                    <div id="imagePreview" class="hidden">
                                        <img id="previewImg" class="w-full max-h-48 lg:max-h-64 mx-auto object-cover rounded-lg" alt="Preview">
                                        <button type="button" onclick="removeImage()" class="mt-3 text-red-600 hover:text-red-800 text-sm">Hapus Gambar Baru</button>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Meta Description -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ringkasan / Meta Description (SEO)</label>
                            <textarea 
                                rows="3"
                                maxlength="160"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            >WaliKota Medan meresmikan aplikasi layanan publik digital yang mengintegrasikan 27 jenis layanan dalam satu platform mobile.</textarea>
                            <p class="text-xs text-gray-500 mt-1">Maksimal 160 karakter</p>
                        </div>

                        <!-- Konten Berita -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Konten Berita <span class="text-red-500">*</span></label>
                            <textarea 
                                id="kontenBerita"
                                rows="10"
                                required
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm min-h-[220px]"
                            >Medan - WaliKota Medan secara resmi meluncurkan aplikasi layanan publik terintegrasi yang mengintegrasikan 27 jenis layanan administrasi pemerintahan dalam satu platform digital.

Aplikasi bernama "Medan Smart Service" ini dirancang untuk memudahkan warga Kota Medan dalam mengakses berbagai layanan pemerintah tanpa harus datang langsung ke kantor dinas terkait.

Fitur unggulan meliputi:
- Perpanjangan KTP dan Kartu Keluarga
- Pengajuan izin usaha (SIUP, TDP, IMB)
- Pembayaran pajak daerah
- Pengaduan layanan publik dengan tracking real-time

Kepala Lembaga Permasyarakatan , Budi Santoso, menyatakan aplikasi ini merupakan wujud komitmen pemerintah dalam transformasi digital layanan publik.</textarea>
                        </div>

                        <!-- Action Buttons -->
                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between pt-6 border-t space-y-3 sm:space-y-0">
                            <button 
                                type="button"
                                onclick="openUnpublishModal()"
                                class="w-full sm:w-auto px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-medium"
                            >
                                <i class="fa-solid fa-circle-xmark"></i> Unpublish
                            </button>
                            <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4">
                                <a href="news.html" class="w-full sm:w-auto px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition font-medium text-center">
                                    Batal
                                </a>
                                <button 
                                    type="submit"
                                    class="w-full sm:w-auto px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium"
                                >
                                    <i class="fa-solid fa-floppy-disk"></i> Update Berita
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </main>
        </div>
    </div>

    <!-- Unpublish Confirmation Modal -->
    <div id="unpublishModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-md w-full p-6">
            <div class="mb-4">
                <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fa-solid fa-exclamation-triangle text-red-600 text-xl"></i>
                </div>
                <h3 class="text-lg font-bold text-gray-800 text-center mb-2">Konfirmasi Unpublish</h3>
                <p class="text-gray-600 text-center text-sm">Apakah Anda yakin ingin unpublish berita ini? Berita tidak akan terlihat di website publik.</p>
            </div>
            <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3">
                <button 
                    onclick="closeUnpublishModal()"
                    class="w-full sm:w-1/2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition font-medium"
                >
                    Batal
                </button>
                <button 
                    onclick="confirmUnpublish()"
                    class="w-full sm:w-1/2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-medium"
                >
                    Ya, Unpublish
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="hidden fixed top-6 right-4 lg:right-6 bg-green-500 text-white px-4 lg:px-6 py-4 rounded-lg shadow-lg z-50 max-w-sm">
        <div class="flex items-center space-x-3">
            <span class="text-2xl">✓</span>
            <div>
                <p class="font-medium" id="toastTitle">Berhasil!</p>
                <p class="text-sm" id="toastMessage">Berita berhasil diupdate</p>
            </div>
        </div>
    </div>

    <script>
        // Sidebar toggle
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('sidebarOverlay');
        const hamburger = document.getElementById('hamburger');
        const closeSidebar = document.getElementById('closeSidebar');

        function openSidebar() {
            sidebar.classList.remove('-translate-x-full');
            overlay.classList.remove('hidden');
        }

        function closeSidebarFunc() {
            sidebar.classList.add('-translate-x-full');
            overlay.classList.add('hidden');
        }

        hamburger.addEventListener('click', openSidebar);
        closeSidebar.addEventListener('click', closeSidebarFunc);
        overlay.addEventListener('click', closeSidebarFunc);

        // Auto-generate slug from title
        document.getElementById('judulBerita').addEventListener('input', function(e) {
            const title = e.target.value;
            const slug = title
                .toLowerCase()
                .replace(/[^a-z0-9\s-]/g, '')
                .replace(/\s+/g, '-')
                .replace(/-+/g, '-')
                .trim();
            document.getElementById('slug').value = slug;
        });

        // Image preview
        function previewImage(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('previewImg').src = e.target.result;
                    document.getElementById('uploadPlaceholder').classList.add('hidden');
                    document.getElementById('imagePreview').classList.remove('hidden');
                };
                reader.readAsDataURL(file);
            }
        }

        function removeImage() {
            document.getElementById('imageUpload').value = '';
            document.getElementById('uploadPlaceholder').classList.remove('hidden');
            document.getElementById('imagePreview').classList.add('hidden');
        }

        // Update form
        function handleUpdate(event) {
            event.preventDefault();
            showToast('Berhasil!', 'Berita berhasil diupdate');
            setTimeout(() => {
                window.location.href = 'news.html';
            }, 1500);
        }

        // Unpublish modal
        function openUnpublishModal() {
            document.getElementById('unpublishModal').classList.remove('hidden');
        }

        function closeUnpublishModal() {
            document.getElementById('unpublishModal').classList.add('hidden');
        }

        function confirmUnpublish() {
            closeUnpublishModal();
            showToast('Berhasil!', 'Berita berhasil di-unpublish');
            setTimeout(() => {
                window.location.href = 'news.html';
            }, 1500);
        }

        // Show toast
        function showToast(title, message) {
            const toast = document.getElementById('toast');
            document.getElementById('toastTitle').textContent = title;
            document.getElementById('toastMessage').textContent = message;
            toast.classList.remove('hidden');
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 3000);
        }
    </script>
</body>
</html>